@page "/cards"
@using TopTrumps.Data.DTOs
@using TopTrumps.Data.Services
@using TopTrumps.WebApp.Components

@inject ICardsService CardsService

@attribute [Authorize(Roles = "Admin")]

<h3>
    Cards
</h3>

<div class="row">
    <div class="col-12">
        <NavLink class="btn btn-primary float-right" href="/cards/new">
            <span class="oi oi-home" aria-hidden="true"></span> Add New Card
        </NavLink>
    </div>
</div>
<br />

<div class="row">
    @foreach (var card in _cardsCollection)
    {
        <CardComponent Card="card" />
    }
</div>

@code
{
    private List<Card> _cardsCollection = new List<Card>();

    protected override async Task OnInitializedAsync()
    {
        _cardsCollection = (await CardsService.GetAllCards()).ToList();
    }
}
