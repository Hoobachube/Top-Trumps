@page "/cards"
@using TopTrumps.Data.DTOs
@using TopTrumps.Data.Services

@inject ICardsService _cardsService

@attribute [Authorize(Roles = "Admin")]

<h3>
    Cards
</h3>

<div class="row">
    <div class="col-12">
        <NavLink class="btn btn-primary float-right" href="/cards/new">
            <span class="oi oi-home" aria-hidden="true"></span> Add New Card
        </NavLink>
    </div>
</div>



<div class="row">
    <div class="col-12">
        <table>
            <tr>
                <th>Card Id</th>
                <th>Card Name</th>
                <th>Card Type</th>
                <th>Card ABV</th>
                <th>Card Accessibility</th>
                <th>Card Reputation</th>
                <th>Card Popularity</th>
                <th>Card Description</th>
                <th></th>
            </tr>
            @foreach (var card in _cards)
            {
                <tr>
                    <td>@card.Id</td>
                    <td>@card.Name</td>
                    <td>@card.Type</td>
                    <td>@card.ABV</td>
                    <td>@card.Accessibility</td>
                    <td>@card.Reputation</td>
                    <td>@card.Popularity</td>
                    <td>@card.Description</td>
                    <td>
                        <NavLink class="btn btn-primary" href=@{$"cards/{card.Id}"}>
                            <span class="oi oi-home" aria-hidden="true"></span> Edit
                        </NavLink>
                    </td>
                </tr>
            }
        </table>
    </div>
</div>

@code
{
    private IEnumerable<Card> _cards = new List<Card>();

    protected override async Task OnInitializedAsync()
    {
        _cards = await _cardsService.GetAllCards();
    }
}
